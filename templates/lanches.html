{% extends 'inicio.html' %}
{% block content %}

<main class="menu-container">

    <h1 class="titulo-cardapio">üçî Card√°pio Royal Burger</h1>

    <!-- BOT√ÉO CADASTRAR -->
    <a href="{{ url_for('cadastrar_lanches') }}"
       class="btn-cadastrar-lanche btn-top-right">
        ‚ûï Cadastrar Lanche
    </a>

    <!-- CONTROLES -->
    <div class="menu-controls">

        <!-- Toggle Tabela -->
        <form method="get" action="{{ url_for('lanches') }}" class="toggle-form">
            <input type="hidden" name="form_id" value="valor">
            <input type="hidden" name="valor_" value="{{ valor_ }}">
            <input type="hidden" name="exibir" value="{{ exibir }}">

            <label class="toggle">
                <span>Modo Tabela</span>
                <input type="checkbox" onchange="this.form.submit()"
                       {% if valor_ in ['True', True] %}checked{% endif %}>
                <span class="slider"></span>
            </label>
        </form>

        <!-- Toggle Exibir Indispon√≠veis -->
        <form method="get" action="{{ url_for('lanches') }}" class="toggle-form">
            <input type="hidden" name="form_id" value="exibir">
            <input type="hidden" name="valor_" value="{{ valor_ }}">
            <input type="hidden" name="exibir" value="{{ exibir }}">

            <label class="toggle">
                <span>Exibir indispon√≠veis</span>
                <input type="checkbox" onchange="this.form.submit()"
                       {% if exibir in ['True', True] %}checked{% endif %}>
                <span class="slider"></span>
            </label>
        </form>

    </div>

    <!-- ================= CARDS ================= -->
    {% if not valor_ or valor_ == 'False' %}

    <div class="cards-area">

        {% for l in lanches %}
        {% set ativo = (l['disponivel'] in ['True', True]) %}

        <div class="card-lanche
             {% if not ativo %}card-desativado{% endif %}
             {% if not ativo and exibir not in ['True', True] %}card-oculto{% endif %}">

            <div class="card-id">#{{ l['id_lanche'] }}</div>
            <div class="card-nome">{{ l['nome_lanche'] }}</div>

            {% if l['descricao_lanche'] %}
                <div class="card-desc">{{ l['descricao_lanche'] }}</div>
            {% endif %}

            <div class="card-preco">
                R$ {{ "%.2f"|format(l['valor_lanche']) }}
            </div>
        </div>

        {% endfor %}

    </div>

    {% else %}

    <!-- ================= TABELA ================= -->
    <table class="menu-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>NOME</th>
                <th>VALOR</th>
            </tr>
        </thead>
        <tbody>

        {% for l in lanches %}
        {% set ativo = (l['disponivel'] in ['True', True]) %}

        <tr class="
            {% if not ativo %}linha-desativada{% endif %}
            {% if not ativo and exibir not in ['True', True] %}linha-oculta{% endif %}">
            <td>#{{ l['id_lanche'] }}</td>
            <td>{{ l['nome_lanche'] }}</td>
            <td>R$ {{ "%.2f"|format(l['valor_lanche']) }}</td>
        </tr>

        {% endfor %}

        </tbody>
    </table>

    {% endif %}

</main>

<style>
/* ===== CONTAINER ===== */

/* ===== T√çTULO ===== */
.titulo-cardapio{
  position: absolute;
  top: 8vh;
  width: 100%;
  text-align: center;
  color: #d8a72f;
  font-size: 36px;
  text-shadow: 0 0 12px #000;
}

/* ===== BOT√ÉO ===== */
.btn-top-right {
  position: absolute;
  top: 14px;
  right: 18px;
  z-index: 50;
}
.btn-cadastrar-lanche {
  background: linear-gradient(135deg, #d8a72f, #f1c94a);
  color: #111;
  padding: 8px 18px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 700;
  text-decoration: none;
  box-shadow: 0 4px 12px rgba(216,167,47,.3);
}

/* ===== CONTROLES ===== */
.menu-controls {
  display: flex;
  gap: 20px;
  justify-content: center;
  margin: 90px 0 20px 0;
}

/* ===== TOGGLE ===== */
.toggle { display: inline-flex; gap: 10px; align-items: center; }
.toggle input { display: none; }
.slider {
  width: 46px;
  height: 24px;
  background: #2f2f2f;
  border-radius: 20px;
  position: relative;
}
.slider::after {
  content: "";
  width: 20px;
  height: 20px;
  background: #fff;
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  transition: .25s;
}
.toggle input:checked + .slider {
  background: #d8a72f;
}
.toggle input:checked + .slider::after {
  transform: translateX(22px);
}

/* ===== CARDS ===== */
.cards-area {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 28px;
  width: 100%;
}
.card-lanche {
  background: #111;
  border: 2px solid #d8a72f;
  border-radius: 14px;
  padding: 22px;
  text-align: center;
}
.card-lanche:hover{
    transform: translateY(-5px);
    box-shadow: 0 8px 30px rgba(218,165,32,0.5);
}
.card-desativado {
  opacity: .45;
  border-color: #555;
}
.card-oculto {
  display: none;
}

/* ===== TABELA ===== */
.menu-table {
  width: 100%;
  border-collapse: collapse;
}
.menu-table th {
  background: #d8a72f;
  color: #111;
  padding: 14px;
}
.menu-table td {
  padding: 14px;
  border-bottom: 1px solid #222;
}
.linha-desativada {
  opacity: .5;
}
.linha-oculta {
  display: none;
}
</style>

{% endblock %}
