<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>In칤cio</title>
    <!--    <link rel="stylesheet" href="../static/style.css">-->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='imgdois.png') }}" type="image/png">
    <script src="{{ url_for('static', filename='script.js') }}"></script>


</head>
<body style="background-color: #161E25">
<div id="flash-data"
     data-flashes='{{ get_flashed_messages(with_categories=true) | tojson | safe }}'></div>

<script>
    const flashContainer = document.getElementById('flash-data');
    const flashMessages = JSON.parse(flashContainer.dataset.flashes || '[]');
    flashMessages.forEach(([category, message]) => {
        const div = document.createElement('div');
        div.textContent = message;
        div.className = `flash-message ${category}`;
        document.body.appendChild(div);
        setTimeout(() => div.remove(), 4000);
    });
</script>

<nav id="nav">
    <div class="container-nav">
        <div class="header-nav">
            <img onclick="closeNav()" id="close-menu" src="https://images.icon-icons.com/2518/PNG/512/x_icon_150997.png"
                 alt="Fechar">
        </div>
        <div class="content-nav">
            {% if session['papel'] == 'admin' %}
            <a href="{{ url_for('pessoas') }}">FUNCION츼RIOS</a>
            <a href="{{ url_for('cadastrar_pessoas') }}">CADASTRAR FUNCION츼RIOS</a>
            <a href="{{url_for('entradas')}}">ENTRADAS</a>
            <a href="{{url_for('cadastrar_entradas')}}">CADASTRAR ENTRADAS</a>
            <a href="{{url_for('vendas')}}">VENDAS</a>
            <a href="{{url_for('cadastrar_lanche_insumos')}}">CADASTRAR RECEITA</a>
            <a href="{{url_for('lanche_insumos')}}">RECEITA</a>
            <a href="{{url_for('cadastrar_lanches')}}"> LANCHES </a>
            <a href="{{url_for('cadastrar_insumos')}}"> CADASTRAR INSUMOS </a>


            {% endif %}
            <a href="{{url_for('pedidos')}}">PEDIDOS</a>
            <a href="{{url_for('lanches')}}">CARD츼PIO</a>
            <a href="{{url_for('insumos')}}">INSUMOS</a>
        </div>
    </div>
</nav>
<header>
    <div class="header-content">
        <div id="menu-button" onclick="openNav()">&#9776</div>

        <a href="{{ url_for('index') }}">
            <img id="logo" src="{{ url_for('static', filename='imgdois.png') }}" alt="Royal Burger">
        </a>

        <!-- 游댠 칈CONES CENTRALIZADOS -->
        <div class="header-center">
            <a href="{{ url_for('categorias') }}" class="header-item">
                <img src="{{ url_for('static', filename='teste_categoria.png') }}">
                <span>Categorias</span>
            </a>

            <a href="{{ url_for('insumos') }}" class="header-item">
                <img src="{{ url_for('static', filename='insumos_png.jpg') }}">
                <span>Insumos</span>
            </a>
        </div>
    </div>


    {% if 'user_id' in session %}
    <!-- C칩digo para quando o usu치rio EST츼 logado (menu de perfil) -->
    <div style="display: flex; align-items: center; margin-left: auto; margin-right: 35px; gap: 10px;">
        <!-- From Uiverse.io by devkatyall -->
        <label class="popup">
            <input type="checkbox"/>
            <div tabindex="0" class="burger">
                <svg width="40" height="40" viewBox="0 0 130 130" xmlns="http://www.w3.org/2000/svg">
                    <style>
                        .circle {
                            stroke: #4da3ff;
                            fill: none;
                            stroke-width: 6;
                            animation: pulse 2.2s ease-in-out infinite;
                            transform-origin: 65px 65px;
                        }

                        .glow {
                            stroke: #4da3ff;
                            fill: none;
                            stroke-width: 10;
                            opacity: 0.15;
                            transform-origin: 65px 65px;
                            animation: breathe 3s ease-in-out infinite;
                        }

                        .head {
                            fill: #4da3ff;
                            animation: headFloat 3s ease-in-out infinite;
                        }

                        .body {
                            fill: #4da3ff;
                            animation: bodyFloat 3s ease-in-out infinite;
                            animation-delay: .15s;
                        }

                        .shine {
                            stroke: white;
                            stroke-width: 3;
                            stroke-linecap: round;
                            opacity: 0.0;
                            animation: shineMove 2.5s linear infinite;
                        }

                        @keyframes pulse {
                            0% {
                                transform: scale(1);
                            }
                            50% {
                                transform: scale(1.04);
                            }
                            100% {
                                transform: scale(1);
                            }
                        }

                        @keyframes breathe {
                            0% {
                                transform: scale(1);
                                opacity: .15;
                            }
                            50% {
                                transform: scale(1.12);
                                opacity: .25;
                            }
                            100% {
                                transform: scale(1);
                                opacity: .15;
                            }
                        }

                        @keyframes headFloat {
                            0% {
                                transform: translateY(0);
                            }
                            50% {
                                transform: translateY(-4px);
                            }
                            100% {
                                transform: translateY(0);
                            }
                        }

                        @keyframes bodyFloat {
                            0% {
                                transform: translateY(0);
                            }
                            50% {
                                transform: translateY(3px);
                            }
                            100% {
                                transform: translateY(0);
                            }
                        }

                        @keyframes shineMove {
                            0% {
                                transform: translate(-40px, -40px) rotate(45deg);
                                opacity: 0;
                            }
                            40% {
                                opacity: 0.5;
                            }
                            60% {
                                opacity: 0.2;
                            }
                            100% {
                                transform: translate(140px, 140px) rotate(45deg);
                                opacity: 0;
                            }
                        }
                    </style>

                    <!-- brilho circular -->
                    <circle cx="65" cy="65" r="52" class="glow"/>

                    <!-- c칤rculo principal -->
                    <circle cx="65" cy="65" r="45" class="circle"/>

                    <!-- cabe칞a -->
                    <circle cx="65" cy="50" r="15" class="head"/>

                    <!-- corpo -->
                    <path d="M40 92 q25 -28 50 0 q-25 12 -50 0" class="body"/>

                    <!-- shine animado -->
                    <line x1="20" y1="20" x2="60" y2="60" class="shine"/>
                </svg>
            </div>
            <nav class="popup-window">
                <legend>Atalhos</legend>
                <ul>
                    <li>
                        <a href="{{ url_for('editar_pessoa', id_pessoa=session['user_id']) }}"
                           style="text-decoration: none">
                            <button>
                                <svg
                                        width="14"
                                        height="14"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="1.2"
                                        stroke-linecap="round"
                                        xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                            d="M19 4v6.406l-3.753 3.741-6.463-6.462 3.7-3.685h6.516zm2-2h-12.388l1.497 1.5-4.171 4.167 9.291 9.291 4.161-4.193 1.61 1.623v-12.388zm-5 4c.552 0 1 .449 1 1s-.448 1-1 1-1-.449-1-1 .448-1 1-1zm0-1c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm6.708.292l-.708.708v3.097l2-2.065-1.292-1.74zm-12.675 9.294l-1.414 1.414h-2.619v2h-2v2h-2v-2.17l5.636-5.626-1.417-1.407-6.219 6.203v5h6v-2h2v-2h2l1.729-1.729-1.696-1.685z"
                                    ></path>
                                </svg>
                                <span>Editar</span>
                            </button>
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('logout') }}" style="text-decoration: none">
                            <button>
                                <svg
                                        width="14"
                                        height="14"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="1"
                                        stroke-linecap="round"
                                        xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                            d="M2.598 9h-1.055c1.482-4.638 5.83-8 10.957-8 6.347 0 11.5 5.153 11.5 11.5s-5.153 11.5-11.5 11.5c-5.127 0-9.475-3.362-10.957-8h1.055c1.443 4.076 5.334 7 9.902 7 5.795 0 10.5-4.705 10.5-10.5s-4.705-10.5-10.5-10.5c-4.568 0-8.459 2.923-9.902 7zm12.228 3l-4.604-3.747.666-.753 6.112 5-6.101 5-.679-.737 4.608-3.763h-14.828v-1h14.826z"
                                    ></path>
                                </svg>
                                <span>Sair</span>
                            </button>
                        </a>
                    </li>
                </ul>
            </nav>
        </label>
        <!-- Nome e cargo do usu치rio -->
        <div class="user-details" style="color: #fff; font-size: 12px; text-align: left;">
            <p style="margin: 0; font-weight: bold;">{{ session['username'] }}</p>
            <p style="margin: 0; color: #ccc;">{{ session['papel'] }}</p>
        </div>
    </div>
    {% else %}
    <!-- C칩digo para quando o usu치rio N츾O est치 logado (bot칚o de login) -->
    <div style="display: flex; align-items: center; margin-left: auto; margin-right: 35px;">
        <!-- From Uiverse.io by reglobby -->
        <a href="{{ url_for('login') }}" style="text-decoration: none">
            <div aria-label="User Login Button" tabindex="0" role="button" class="user-profile">
                <div class="user-profile-inner">
                    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <g data-name="Layer 2" id="Layer_2">
                            <path d="m15.626 11.769a6 6 0 1 0 -7.252 0 9.008 9.008 0 0 0 -5.374 8.231 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 9.008 9.008 0 0 0 -5.374-8.231zm-7.626-4.769a4 4 0 1 1 4 4 4 4 0 0 1 -4-4zm10 14h-12a1 1 0 0 1 -1-1 7 7 0 0 1 14 0 1 1 0 0 1 -1 1z"></path>
                        </g>
                    </svg>
                    <span>Log In</span>
                </div>
            </div>
        </a>
    </div>
    {% endif %}


</header>
{% block content %}
{% if request.endpoint == 'index' %}
<video autoplay muted loop id="bg-video">
    <source src="../static/a.mp4" type="video/mp4">
</video>
{% endif %}
<main>
    <!--            <a class="rota_inicial" href="{{ url_for('pessoas') }}">PESSOAS</a>-->

    <!--            <a  class="rota_inicial" href="{{ url_for('cadastrar_pessoas') }}">Cadastrar pessoas</a>-->


    <div class="card_rede_sociais">
        <a href="#" class="socialContainer containerOne">
            <svg class="socialSvg instagramSvg" viewBox="0 0 16 16">
                <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"></path>
            </svg>
        </a>
        <a href="#" class="socialContainer containerFour">
            <svg class="socialSvg whatsappSvg" viewBox="0 0 16 16">
                <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"></path>
            </svg>
        </a>
    </div>
    <div class="card-grafico">
        <h2>Gr치fico de Vendas</h2>
        <canvas id="graficoVendas"></canvas>
    </div>


</main>

{% endblock %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="../static/script.js"></script>
<!-- BOOTSTRAP JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    async function carregarDados() {
        try {
            const resposta = await fetch("http://192.168.1.238:5002/dados_grafico");
            const dados = await resposta.json();

            const ctx = document.getElementById("graficoVendas").getContext("2d");
            if (!ctx) return;
            // Criando gradiente moderno
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, "rgb(61,61,62)");
            gradient.addColorStop(1, "rgba(0, 153, 255, 0)");

            new Chart(ctx, {
                type: "line",
                data: {
                    labels: dados.labels,
                    datasets: [{
                        label: "Vendas",
                        data: dados.values,
                        borderWidth: 3,
                        borderColor: "rgb(218,165,32)",
                        backgroundColor: gradient,
                        pointRadius: 5,
                        pointBackgroundColor: "#3d3d3e",
                        tension: 0.4 // deixa a linha mais curva e bonita
                    }]
                },
                options: {
                    plugins: {
                        legend: {
                            labels: {
                                color: "#fff",
                                font: {size: 14}
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {color: "#ccc"},
                            grid: {display: false}
                        },
                        y: {
                            ticks: {color: "#ccc"},
                            grid: {
                                color: "rgba(255,255,255,0.1)"
                            }
                        }
                    }
                }
            });

        } catch (err) {
            console.error("Erro no gr치fico:", err);
        }
    }

    carregarDados();
</script>

</body>
</html>